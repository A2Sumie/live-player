name = "live-player"
main = ".open-next/worker.js"
compatibility_date = "2025-03-01"
compatibility_flags = [ "nodejs_compat", "global_fetch_strictly_public" ]
assets = { binding = "ASSETS", directory = ".open-next/assets"}
observability = { enabled = true}

# Worker Routes
[[routes]]
pattern = "tv.n2nj.moe/*"
zone_name = "n2nj.moe"

[[routes]]
pattern = "cic.n2nj.moe/*"
zone_name = "n2nj.moe"



[[d1_databases]]
binding = "DB"
database_name = "live-player"
database_id = "d15dd1a7-ccd9-4b7c-8309-0f8a586ac881"

# [env.production]
# vars = { NODE_ENV = "production" }

# [[env.production.d1_databases]]
# binding = "DB"
# database_name = "live-player"
# database_id = "d15dd1a7-ccd9-4b7c-8309-0f8a586ac881"

# [env.development]
# vars = { NODE_ENV = "development" }

# 本地开发不使用 D1，使用本地 SQLite 文件
# [[env.development.d1_databases]]
# binding = "DB"
# database_name = "live-player"
# database_id = "d15dd1a7-ccd9-4b7c-8309-0f8a586ac881"

# 环境变量配置 (Workers 环境)
# 非敏感信息
[vars]
INTERNAL_API_URL = "https://idol-bbq-internal.n2nj.moe"

# 敏感信息通过 wrangler secret 设置：
# echo "值" | npx wrangler secret put SECRET_NAME
