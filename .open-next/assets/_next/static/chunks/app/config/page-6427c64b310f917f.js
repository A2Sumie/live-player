(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[653],{63:(e,t,s)=>{"use strict";var r=s(7260);s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},796:(e,t,s)=>{Promise.resolve().then(s.bind(s,4494))},4494:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(5155),a=s(2115),l=s(63),i=s(8712);function n(){let{user:e,loading:t}=(0,i.A)(),s=(0,l.useRouter)(),[n,o]=(0,a.useState)([]),[c,d]=(0,a.useState)(!1),[h,u]=(0,a.useState)(""),[x,m]=(0,a.useState)(null),[f,b]=(0,a.useState)("");(0,a.useEffect)(()=>{t||e||s.push("/auth/login?redirect=/config")},[e,t,s]),(0,a.useEffect)(()=>{e&&p()},[e]);let p=async()=>{d(!0),u("");try{let e=await fetch("/api/config/crawlers");if(401===e.status)return void s.push("/auth/login?redirect=/config");if(!e.ok){let t=await e.json().catch(()=>({error:"Failed to fetch crawler config"}));throw Error(t.error||"Failed to fetch crawler config")}let t=await e.json();o(t)}catch(e){u(e instanceof Error?e.message:"Failed to load crawlers")}finally{d(!1)}};return t||!e?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-white text-xl",children:"Loading..."})}):(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-indigo-900 p-8",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-8 shadow-2xl border border-white/20",children:[(0,r.jsxs)("h1",{className:"text-4xl font-bold text-white mb-6 flex items-center gap-3",children:[(0,r.jsx)("span",{className:"text-5xl",children:"⚙️"}),"Crawler Configuration"]}),(0,r.jsxs)("div",{className:"mb-6 text-sm text-white/60",children:["Logged in as ",(0,r.jsx)("span",{className:"font-semibold text-white",children:e.username})]}),h&&(0,r.jsx)("div",{className:"mb-6 p-4 bg-red-500/20 border border-red-500/50 rounded-lg text-red-200",children:h}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-white",children:["Crawlers (",n.length,")"]}),(0,r.jsx)("button",{onClick:p,disabled:c,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 text-white rounded-lg transition-colors",children:c?"Loading...":"Refresh"})]}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"text-left border-b border-white/20",children:[(0,r.jsx)("th",{className:"pb-3 px-4 text-white font-semibold",children:"Name"}),(0,r.jsx)("th",{className:"pb-3 px-4 text-white font-semibold",children:"Type"}),(0,r.jsx)("th",{className:"pb-3 px-4 text-white font-semibold",children:"Schedule"}),(0,r.jsx)("th",{className:"pb-3 px-4 text-white font-semibold",children:"Cookie File"}),(0,r.jsx)("th",{className:"pb-3 px-4 text-white font-semibold",children:"Status"})]})}),(0,r.jsx)("tbody",{children:n.map(e=>(0,r.jsxs)("tr",{className:"border-b border-white/10 hover:bg-white/5 transition-colors",children:[(0,r.jsx)("td",{className:"py-4 px-4 text-white font-medium",children:e.name}),(0,r.jsx)("td",{className:"py-4 px-4",children:(0,r.jsx)("span",{className:"px-2 py-1 bg-blue-600/30 text-blue-200 rounded text-sm",children:e.type})}),(0,r.jsx)("td",{className:"py-4 px-4",children:(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("span",{className:"text-white/80 text-sm",children:(e=>{if(!e)return"No schedule";let t=e.split(" ");if(5===t.length){let[e,s,,,r]=t;if("*/5"===e)return"Every 5 minutes";if("*/10"===e)return"Every 10 minutes";if("*/30"===e)return"Every 30 minutes";if("*/1"===s)return"Every hour";if("*"!==s&&"*"!==e)return"Daily at ".concat(s,":").concat(e.padStart(2,"0"))}return e})(e.schedule)}),e.schedule&&(0,r.jsx)("span",{className:"text-white/40 text-xs font-mono",children:e.schedule})]})}),(0,r.jsx)("td",{className:"py-4 px-4",children:e.cookieFile?(0,r.jsx)("span",{className:"text-green-400 text-sm font-mono",children:e.cookieFile.split("/").pop()}):(0,r.jsx)("span",{className:"text-white/40 text-sm",children:"N/A"})}),(0,r.jsx)("td",{className:"py-4 px-4",children:(0,r.jsx)("span",{className:"px-2 py-1 rounded text-sm ".concat(e.enabled?"bg-green-600/30 text-green-200":"bg-gray-600/30 text-gray-200"),children:e.enabled?"Enabled":"Disabled"})})]},e.name))})]})}),(0,r.jsx)("div",{className:"mt-6 p-4 bg-yellow-500/20 border border-yellow-500/50 rounded-lg",children:(0,r.jsxs)("p",{className:"text-yellow-200 text-sm",children:[(0,r.jsx)("strong",{children:"Note:"})," Schedule editing will be available in a future update. For now, this page provides a read-only view of your crawler configurations."]})})]})]})})})}},8712:(e,t,s)=>{"use strict";s.d(t,{WithAuth:()=>o,A:()=>n});var r=s(5155),a=s(2115);let l=(0,a.createContext)(void 0);function i(e){let{children:t}=e,[s,i]=(0,a.useState)(null),[n,o]=(0,a.useState)(!0),c=async()=>{try{let e=await fetch("/api/auth/me",{credentials:"include"});if(e.ok){let t=await e.json();i(t)}else i(null)}catch(e){console.error("Failed to fetch user:",e),i(null)}finally{o(!1)}},d=async(e,t)=>{try{let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:e,password:t})});if(s.ok){let e=await s.json();return i(e),!0}return!1}catch(e){return console.error("Login failed:",e),!1}},h=async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"})}catch(e){console.error("Logout failed:",e)}i(null)},u=async()=>{await c()};return(0,a.useEffect)(()=>{c()},[]),(0,r.jsx)(l.Provider,{value:{user:s,loading:n,login:d,logout:h,refreshUser:u},children:t})}function n(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function o(e){let{children:t}=e;return(0,r.jsx)(i,{children:t})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=796)),_N_E=e.O()}]);