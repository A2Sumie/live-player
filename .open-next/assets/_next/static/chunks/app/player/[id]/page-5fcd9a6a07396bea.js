(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[708],{950:(e,t,s)=>{"use strict";s.d(t,{default:()=>m});var a=s(5155),l=s(2115),n=s(2619),r=s.n(n),o=s(4889),i=s(7088),c=s(4510),u=s.n(c);function d(e){let{option:t,getInstance:s,...n}=e,r=(0,l.useRef)(null),c=(0,l.useCallback)((e,t,s)=>{if(i.default.isSupported()){s.hls&&s.hls.destroy();let a=new URL(t).searchParams,l=new i.default({xhrSetup(e,t){if(t.includes(".ts")||t.endsWith(".m3u8")){let s=new URL(t);a.forEach((e,t)=>{s.searchParams.set(t,e)}),e.open("GET",s.toString(),!0)}}});l.loadSource(t),l.attachMedia(e),s.hls=l,s.on("destroy",()=>l.destroy())}else e.canPlayType("application/vnd.apple.mpegurl")?e.src=t:s.notice.show="Unsupported playback format: m3u8"},[]);return(0,l.useEffect)(()=>{let e=new o.A({...t,container:r.current||"",customType:{m3u8:c},plugins:[u()({quality:{control:!0,setting:!0,getName:e=>e.height+"P",title:"Quality",auto:"Auto"},audio:{control:!0,setting:!0,getName:e=>e.name,title:"Audio",auto:"Auto"}})]});return s&&"function"==typeof s&&s(e),()=>{console.log("destroy outside"),e&&e.destroy&&(console.log("destroy inside"),e.destroy(!1))}},[]),(0,a.jsx)("div",{ref:r,...n})}function m(e){let{player:t}=e,s=(0,l.useRef)(null),n={url:t.url,poster:(()=>{if(t.coverImage){let e=btoa(String.fromCharCode(...(Array.isArray(t.coverImage),new Uint8Array(t.coverImage))));return"data:image/jpeg;base64,".concat(e)}return t.coverUrl||""})(),volume:.7,isLive:!0,muted:!1,autoplay:!1,pip:!0,autoSize:!0,autoMini:!0,screenshot:!0,setting:!0,loop:!0,flip:!0,playbackRate:!0,aspectRatio:!0,fullscreen:!0,fullscreenWeb:!0,subtitleOffset:!0,miniProgressBar:!0,mutex:!0,backdrop:!0,playsInline:!0,autoPlayback:!0,airplay:!0,theme:"#00d4ff",lang:"zh-cn",moreVideoAttr:{crossOrigin:"anonymous"}};return(0,a.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,a.jsxs)("header",{className:"bg-gray-900 text-white p-4 z-10",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(r(),{href:"/",className:"text-blue-400 hover:text-blue-300 transition-colors",children:"â† Home"}),(0,a.jsx)("h1",{className:"text-xl font-bold",children:t.name})]})}),t.description&&(0,a.jsx)("p",{className:"text-gray-300 mt-2 text-sm",children:t.description})]}),(0,a.jsx)("div",{className:"flex-1 bg-black",children:(0,a.jsx)(d,{option:n,getInstance:e=>{s.current=e},className:"w-full h-full flex",style:{minHeight:"400px"}})}),t.announcement&&(0,a.jsx)("div",{className:"bg-yellow-600 text-black px-4 py-2",children:(0,a.jsxs)("p",{className:"text-sm font-medium",children:["\uD83D\uDCE2 ",t.announcement]})})]})}},2601:(e,t,s)=>{Promise.resolve().then(s.bind(s,950))}},e=>{e.O(0,[910,619,798,441,255,358],()=>e(e.s=2601)),_N_E=e.O()}]);