(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[490],{63:(e,t,s)=>{"use strict";var i=s(7260);s.o(i,"useRouter")&&s.d(t,{useRouter:function(){return i.useRouter}})},5501:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var i=s(5155),r=s(2115),a=s(63),l=s(8712);function o(){let{user:e,loading:t}=(0,l.A)(),s=(0,a.useRouter)(),[o,n]=(0,r.useState)([]),[c,d]=(0,r.useState)(!1),[h,u]=(0,r.useState)(""),[x,m]=(0,r.useState)(null),[f,p]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t||e||s.push("/auth/login?redirect=/cookies/view")},[e,t,s]),(0,r.useEffect)(()=>{e&&g()},[e]);let g=async()=>{d(!0),u("");try{let e=await fetch("/api/cookies/list");if(401===e.status)return void s.push("/auth/login?redirect=/cookies/view");if(!e.ok){let t=await e.json().catch(()=>({error:"Failed to fetch cookies"}));throw Error(t.error||"Failed to fetch cookies")}let t=await e.json();n(t)}catch(e){u(e instanceof Error?e.message:"Failed to load cookies")}finally{d(!1)}},w=async e=>{p(!0),u("");try{let t=await fetch("/api/cookies/view/".concat(e));if(401===t.status)return void s.push("/auth/login?redirect=/cookies/view");if(!t.ok){let e=await t.json().catch(()=>({error:"Failed to fetch cookie details"}));throw Error(e.error||"Failed to fetch cookie details")}let i=await t.json();m(i)}catch(e){u(e instanceof Error?e.message:"Failed to load cookie")}finally{p(!1)}};return t||!e?(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-violet-900 flex items-center justify-center",children:(0,i.jsx)("div",{className:"text-white text-xl",children:"Loading..."})}):(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-violet-900 p-8",children:(0,i.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,i.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-8 shadow-2xl border border-white/20",children:[(0,i.jsxs)("h1",{className:"text-4xl font-bold text-white mb-6 flex items-center gap-3",children:[(0,i.jsx)("span",{className:"text-5xl",children:"\uD83C\uDF6A"}),"Cookie Manager - View"]}),(0,i.jsxs)("div",{className:"mb-6 text-sm text-white/60",children:["Logged in as ",(0,i.jsx)("span",{className:"font-semibold text-white",children:e.username})]}),h&&(0,i.jsx)("div",{className:"mb-6 p-4 bg-red-500/20 border border-red-500/50 rounded-lg text-red-200",children:h}),!x&&(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Available Cookies"}),(0,i.jsx)("button",{onClick:g,disabled:c,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 text-white rounded-lg transition-colors",children:c?"Loading...":"Refresh"})]}),0===o.length&&!c&&(0,i.jsx)("div",{className:"text-white/60 text-center py-8",children:"No cookies found"}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.map(e=>(0,i.jsxs)("div",{className:"p-4 bg-white/5 hover:bg-white/10 rounded-xl border border-white/10 transition-all cursor-pointer",onClick:()=>w(e.name),children:[(0,i.jsxs)("div",{className:"flex justify-between items-start",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-white",children:e.name}),(0,i.jsx)("p",{className:"text-sm text-white/60 mt-1",children:e.filename})]}),(0,i.jsx)("button",{className:"px-3 py-1 bg-purple-600 hover:bg-purple-700 text-white text-sm rounded-lg transition-colors",children:"View"})]}),(0,i.jsxs)("div",{className:"mt-3 flex gap-4 text-xs text-white/60",children:[(0,i.jsxs)("span",{children:["Size: ",(e.size/1024).toFixed(2)," KB"]}),(0,i.jsxs)("span",{children:["Modified: ",new Date(e.lastModified).toLocaleString()]})]})]},e.name))})]}),x&&(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-white",children:x.name}),(0,i.jsx)("button",{onClick:()=>m(null),className:"px-4 py-2 bg gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors",children:"â† Back to List"})]}),(0,i.jsxs)("div",{className:"p-4 bg-white/5 rounded-xl border border-white/10",children:[(0,i.jsxs)("div",{className:"flex gap-4 text-sm text-white/60 mb-4",children:[(0,i.jsxs)("span",{children:["Size: ",(x.size/1024).toFixed(2)," KB"]}),(0,i.jsxs)("span",{children:["Last Modified: ",new Date(x.lastModified).toLocaleString()]})]}),(0,i.jsx)("div",{className:"bg-black/30 rounded-lg p-4 overflow-auto max-h-96",children:(0,i.jsx)("pre",{className:"text-sm text-green-400 font-mono whitespace-pre-wrap",children:x.content})})]})]})]})})})}},7499:(e,t,s)=>{Promise.resolve().then(s.bind(s,5501))},8712:(e,t,s)=>{"use strict";s.d(t,{WithAuth:()=>n,A:()=>o});var i=s(5155),r=s(2115);let a=(0,r.createContext)(void 0);function l(e){let{children:t}=e,[s,l]=(0,r.useState)(null),[o,n]=(0,r.useState)(!0),c=async()=>{try{let e=await fetch("/api/auth/me",{credentials:"include"});if(e.ok){let t=await e.json();l(t)}else l(null)}catch(e){console.error("Failed to fetch user:",e),l(null)}finally{n(!1)}},d=async(e,t)=>{try{let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:e,password:t})});if(s.ok){let e=await s.json();return l(e),!0}return!1}catch(e){return console.error("Login failed:",e),!1}},h=async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"})}catch(e){console.error("Logout failed:",e)}l(null)},u=async()=>{await c()};return(0,r.useEffect)(()=>{c()},[]),(0,i.jsx)(a.Provider,{value:{user:s,loading:o,login:d,logout:h,refreshUser:u},children:t})}function o(){let e=(0,r.useContext)(a);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function n(e){let{children:t}=e;return(0,i.jsx)(l,{children:t})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=7499)),_N_E=e.O()}]);