(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[674],{571:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var a=r(5155),s=r(2115),o=r(8712);function n(){let{user:e}=(0,o.A)(),[t,r]=(0,s.useState)("twitter"),[n,i]=(0,s.useState)(""),[l,d]=(0,s.useState)(""),[c,u]=(0,s.useState)(null),[x,m]=(0,s.useState)(!1),g=async e=>{e.preventDefault(),m(!0),u(null);try{let e=await fetch("/api/cookies",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({finder:t,cookie:l})}),r=await e.text();e.ok?u("Success: Cookie updated!"):u("Error: ".concat(r," (").concat(e.status,")"))}catch(e){u("Error: ".concat(e.message))}finally{m(!1)}};return(0,a.jsx)("div",{className:"min-h-screen p-8 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"max-w-2xl w-full space-y-8 p-8 border border-gray-200 dark:border-gray-800 rounded-lg shadow-lg bg-white dark:bg-black",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-5xl",children:"\uD83C\uDF6A"}),"Cookie Manager"]}),(0,a.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Logged in as ",(0,a.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:(null==e?void 0:e.username)||"loading..."})]}),(0,a.jsx)("a",{href:"/cookies/view",className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:"View Existing Cookies"})]}),(0,a.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400",children:"Update crawler cookies on 3020e"})]}),(0,a.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:g,children:[(0,a.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"finder",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Finder (Crawler Name)"}),(0,a.jsx)("input",{id:"finder",name:"finder",type:"text",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-700 placeholder-gray-500 text-gray-900 dark:text-white dark:bg-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"e.g. twitter, instagram",value:t,onChange:e=>r(e.target.value)})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"secret",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"API Secret"}),(0,a.jsx)("input",{id:"secret",name:"secret",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-700 placeholder-gray-500 text-gray-900 dark:text-white dark:bg-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Secret Token",value:n,onChange:e=>i(e.target.value)})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"cookie",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Cookie Content (Netscape Format)"}),(0,a.jsx)("textarea",{id:"cookie",name:"cookie",rows:10,required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-700 placeholder-gray-500 text-gray-900 dark:text-white dark:bg-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm font-mono text-xs",placeholder:"# Netscape HTTP Cookie File...",value:l,onChange:e=>d(e.target.value)})]})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",disabled:x,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white ".concat(x?"bg-indigo-400":"bg-indigo-600 hover:bg-indigo-700"," focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),children:x?"Updating...":"Update Cookie"})}),c&&(0,a.jsx)("div",{className:"mt-2 text-center text-sm ".concat(c.startsWith("Success")?"text-green-600":"text-red-600"),children:c})]})]})})}},4759:(e,t,r)=>{Promise.resolve().then(r.bind(r,571))},8712:(e,t,r)=>{"use strict";r.d(t,{WithAuth:()=>l,A:()=>i});var a=r(5155),s=r(2115);let o=(0,s.createContext)(void 0);function n(e){let{children:t}=e,[r,n]=(0,s.useState)(null),[i,l]=(0,s.useState)(!0),d=async()=>{try{let e=await fetch("/api/auth/me",{credentials:"include"});if(e.ok){let t=await e.json();n(t)}else n(null)}catch(e){console.error("Failed to fetch user:",e),n(null)}finally{l(!1)}},c=async(e,t)=>{try{let r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:e,password:t})});if(r.ok){let e=await r.json();return n(e),!0}return!1}catch(e){return console.error("Login failed:",e),!1}},u=async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"})}catch(e){console.error("Logout failed:",e)}n(null)},x=async()=>{await d()};return(0,s.useEffect)(()=>{d()},[]),(0,a.jsx)(o.Provider,{value:{user:r,loading:i,login:c,logout:u,refreshUser:x},children:t})}function i(){let e=(0,s.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function l(e){let{children:t}=e;return(0,a.jsx)(n,{children:t})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=4759)),_N_E=e.O()}]);